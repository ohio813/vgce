Replays are MPQ archives containing various pieces of data.

REPLAY.GAME.EVENTS
  Contains the game events (select, order, right click, etc).

REPLAY.INFO
  Contains header information. Mostly packed?

  struct replayInfo
  {
    struct playerHead
    {
      u8    unknown1;
      u8    length;
      char  name[length]
      u32   unknown2;
    }     players[16];
    u16   unknown1;     // creation date/time ??
    u32   unknown2;     // creation date/time ??
    u8    gtLen;
    char  gameType[gtLen];
    u16   unknown3;     // creation date/time ??
    u32   unknown4;     // creation date/time ??
    u32   unknown5;     // creation date/time ??
    u32   unknown6;     // creation date/time ??
    u8    mapLen;
    char  mapFileName[mapLen];
    u32   constant1;    // 0x6ED518ED
    u32   constant2;    // 0x000050F8
    u32   constant3;    // 0xDF07BB00
    ... /* bunch of shit, probably map settings */
    
  }
  The rest is currently unknown. Looks like some of it is compressed, and there's also a large string specifying the map.
  Note: Replay files are hashed and verified.

REPLAY.MESSAGE.EVENTS
  Contains information from chat messages and other non-game impact commands.
  
  struct chatMessage
  {
    u16   unknown (frame?)
    u8    playerID;
    u8    unknown (send type? [to all, to allies, etc])
    u8    length;
    char  message[length];
  }
  
REPLAY.SMARTCAM.EVENTS
  Assuming camera data for first-person replays.

REPLAY.SYNC.EVENTS
  Assuming this file maintains synchronization for more reliable data.

SAVE.JPG
  A preview of the map that was played on.